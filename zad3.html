<html>
    <canvas id="game" width="800" height="600">
        <script>
            var player = {
				x: 425,
				y: 500
			};

            var canv = document.getElementById("game");
            var ctx = canv.getContext("2d");
            
            ctx.beginPath();
            ctx.rect(0, 0, 800, 600);
            ctx.fillStyle = '#1e7813';
            ctx.fill();
            ctx.stroke();

            ctx.beginPath();
            ctx.rect(200, 0, 400, 600);
            ctx.fillStyle = '#353837';
            ctx.fill();
            ctx.stroke();

            ctx.beginPath();
            ctx.rect(180, 0, 20, 600);
            ctx.rect(600, 0, 20, 600);
            ctx.fillStyle = '#ffffff';
            ctx.fill();
            ctx.stroke();


            var y = 0;
            function renderSidesAndStripes() {
                for(i = 0; i <= 19; i++) {
                    ctx.beginPath();
                    ctx.rect(180, i * 30 + y, 20, 30);
                    ctx.rect(600, i * 30 + y, 20, 30);
                    if(i % 2 == 0) ctx.fillStyle = '#de1818';
                    else ctx.fillStyle = '#ffffff';
                    ctx.fill();
                    ctx.stroke();

                    ctx.beginPath();
                    ctx.rect(180, 0, 20, y);
                    ctx.rect(600, 0, 20, y);
                    ctx.fillStyle = '#ffffff';
                    ctx.fill();
                    ctx.stroke();

                    if(y >= 30) {
                        ctx.beginPath();
                        ctx.rect(180, 0, 20, y - 30);
                        ctx.rect(600, 0, 20, y - 30);
                        ctx.fillStyle = '#de1818';
                        ctx.fill();
                        ctx.stroke();
                    }
                }

               renderStripes();
               renderPlayer();
            }

            function renderStripes() {    
                ctx.beginPath();
                ctx.rect(200, 0, 400, 600);
                ctx.fillStyle = '#353837';
                ctx.fill();
                ctx.stroke();
    
                for(i = 0; i <= 4; i++) {
                    ctx.beginPath();
                    ctx.rect(395, i * 120 + y * 2, 10, 60);
                    ctx.fillStyle = '#ffffff';
                    ctx.fill();
                    ctx.stroke();

                    ctx.beginPath();
                    ctx.rect(495, i * 120 + y * 2, 10, 60);
                    ctx.fillStyle = '#ffffff';
                    ctx.fill();
                    ctx.stroke();

                    ctx.beginPath();
                    ctx.rect(295, i * 120 + y * 2, 10, 60);
                    ctx.fillStyle = '#ffffff';
                    ctx.fill();
                    ctx.stroke();

                    ctx.beginPath();
                    ctx.rect(395, 0, 10, y);
                    ctx.fillStyle = '#ffffff';
                    ctx.fill();
                    ctx.stroke();

                    ctx.beginPath();
                    ctx.rect(495, 0, 10, y);
                    ctx.fillStyle = '#ffffff';
                    ctx.fill();
                    ctx.stroke();

                    ctx.beginPath();
                    ctx.rect(295, 0, 10, y);
                    ctx.fillStyle = '#ffffff';
                    ctx.fill();
                    ctx.stroke();
                }
            }

            function renderPlayer() {
				var canv = document.getElementById("game");
				var ctx = canv.getContext("2d");

				ctx.beginPath();
				ctx.rect(player.x, player.y, 50, 80);
				ctx.stroke();
				ctx.fillStyle = '#ebe349';
				ctx.fill();

                var tires = [
                    {x: player.x - 3, y: player.y + 10},
                    {x: player.x - 3, y: player.y + 55},
                    {x: player.x + 50, y: player.y + 10},
                    {x: player.x + 50, y: player.y + 55}
                ]

                for(i = 0; i < 4; i++) {
                    ctx.beginPath();
                    ctx.rect(tires[i].x, tires[i].y, 3, 15);
                    ctx.stroke();
                    ctx.fillStyle = '#363636';
                    ctx.fill();
                }    

                ctx.beginPath();
                ctx.rect(player.x + 5, player.y + 20, 40, 15);
                ctx.stroke();
                ctx.fillStyle = '#a6abff';
                ctx.fill();
			}

            function getKey(key) {
				var acceptableMoves = ["ArrowLeft", "ArrowRight"]
				
				if(acceptableMoves.includes(key.code)) {
					move(key.code);
				} 
			}

            function move(direction) {
				var reverse = direction === "ArrowLeft" ? -1 : 1;
				if((reverse < 0 && player.x > 200) || (reverse > 0 && player.x < 550)) {
					var canv = document.getElementById("game");
					var ctx = canv.getContext("2d");
					
					player.x = player.x + 10 * reverse;
					
					renderPlayer();
				}
			}

            function incY() {
                y = (y + 5) % 60;
            }

            document.addEventListener('keydown', getKey);
            setInterval(renderSidesAndStripes, 50);
            setInterval(incY, 50);
        </script>
    </canvas>
</html>